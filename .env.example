# LINE Bot with Local Ollama VLM Integration
# Copy this file to .env and fill in the values

# =============================================================================
# LINE Messaging API (Required)
# =============================================================================
# Get these from LINE Developers Console: https://developers.line.biz/
LINE_CHANNEL_SECRET=your_channel_secret_here
LINE_CHANNEL_ACCESS_TOKEN=your_access_token_here

# =============================================================================
# Ollama Configuration
# =============================================================================
# Base URL for Ollama API (default: http://localhost:11434)
OLLAMA_BASE_URL=http://ollama:11434

# Model to use for inference (default: gemma3:4b)
# Make sure this model is pulled: docker compose exec ollama ollama pull gemma3:4b
OLLAMA_MODEL=gemma3:4b

# =============================================================================
# Google Drive Configuration (Optional)
# =============================================================================
# Path to service account JSON file for Google Drive access
# Leave empty to disable Drive sync (uses default prompts)
GOOGLE_SERVICE_ACCOUNT_FILE=/app/credentials.json

# Google Drive folder ID containing system_prompt.md and image_map.json
# Can be the folder ID or full shareable URL
DRIVE_FOLDER_ID=

# Sync interval in seconds (default: 45, min: 30, max: 120)
DRIVE_SYNC_INTERVAL_SECONDS=120

# =============================================================================
# Admin Configuration
# =============================================================================
# Comma-separated LINE user IDs for admin notifications
# Example: U1234567890abcdef1234567890abcdef,U9876543210fedcba9876543210fedcba
ADMIN_USER_IDS=

# Minimum alert level: critical, warning, info (default: warning)
ADMIN_ALERT_LEVEL=warning

# =============================================================================
# Rate Limiting
# =============================================================================
# Maximum requests per user per window (default: 30)
RATE_LIMIT_MAX_REQUESTS=30

# Rate limit window in seconds (default: 60)
RATE_LIMIT_WINDOW_SECONDS=60

# =============================================================================
# Queue Configuration
# =============================================================================
# Maximum pending LLM requests (default: 10)
QUEUE_MAX_SIZE=10

# Request timeout in seconds (default: 120)
QUEUE_TIMEOUT_SECONDS=120

# =============================================================================
# Cache Configuration
# =============================================================================
# Local cache directory for Drive assets (default: /tmp/linebot_cache)
CACHE_DIR=/tmp/linebot_cache

# Maximum cache size in MB (default: 100)
CACHE_MAX_SIZE_MB=100

# =============================================================================
# Server Configuration
# =============================================================================
# Server host (default: 0.0.0.0)
HOST=0.0.0.0

# Server port (default: 8000)
PORT=8000

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
LOG_LEVEL=INFO

# Public HTTPS URL for serving images (REQUIRED for !img command)
# Get this from Cloudflare Tunnel logs:
# docker compose logs cloudflared | grep trycloudflare.com
# Example: https://random-subdomain.trycloudflare.com
PUBLIC_BASE_URL=

# =============================================================================
# Scheduled Messages Configuration
# =============================================================================
# Enable scheduled message feature (default: false)
SCHEDULED_MESSAGES_ENABLED=false

# LINE group ID for scheduled messages
# Get this by sending a message in the target group, then check logs:
# docker compose logs linebot | grep "groupId"
# Example: C1234567890abcdef1234567890abcdef
SCHEDULED_GROUP_ID=
